# PHP2021
# Домашнее задание №13. Архитектура кода

В рамках разработки рабочего проекта есть необходимость доработки ранее написанного модуля парсера продукции из предоставляемых клиентом данных, для последующего размещения на платформе. На данный момент парсер может работать только с файлами формата XLSX. время от времени производители присылают разного рода XML файлы, которые сейчас приходится парсить в Excel, и в теории можно будет продумать подгрузку файлов других типов.

В качестве объекта анализа выступает модуль-парсер, который в данный момент состоит из запускаемого через консоль или через Битриксового агента скрипта, который последовательно экземпляр класса FeedsImporter и вызывает его метод run, внутри run создается FeedParser, который в свою очередь вызывает методы ExcelParser и только тогда заполняет временную таблицу данных из файла фида. Добавление еще одного парсера в такой системе выглядит как большое количество переписывания всего модуля.

Во-первых создадим интерфейс FileParserInterface, для того что бы можно было безболезненно добавлять парсеры других загружаемых файлов. На основе этого интерфейса создадим пока два парсера: для Excel (ExcelParser) и XML (XmlParser).

На данный момент такой задачи нет, но на всякий случай создадим интерфейс для парсера фидов (поиск файлов фида, настроек пользователя и т.д.) под потенциально разные задачи. В данный момент фиды есть только у Производителей в основном каталоге продукции, но, например, может потребоваться добавлять какие-то элементы в разрабатываемую на платформе в данный момент секцию библиотеки или в каталоги других типов пользователей. Поэтому создадим FeedParserInterface и к нему пока что одну реализацию интерфейса для загрузки данных в товарный каталог ManufacturerFeedParser.

Управлять всем будет ImportService, который будет использовать например все тем же битриксовым агентом при периодической выгрузке файлов из очереди.

Отдельно вынесем вспомогательные методы (ImportHelper.php) и запись данных во временную таблицу (FeedsImportTempTable.php)
