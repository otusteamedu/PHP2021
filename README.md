# PHP2021

## Домашнее задание №2

### Работа с инфраструктурой

1. Создайте `.env` с помощью команды `make create-env`
2. Отредактируйте `.env` как вам нужно.
3. Разверните инфраструктуру с помощью команды `make up`.
4. Проверка программы.
5. Чтобы остановить контейнеры и удалить всю развёрнутую инфраструктуру используйте команду `make down`
6. Отдельно удалите скачанные образы, если они не нужны: `make delete-base-images`

### Проверка программы

1. После `make up` откройте два терминала:
2. В первом запустите команду `make start-server`, скрипт встанет на паузу после вывода сообщения `Ожидание клиента`
3. Во втором запустите команду `make start-client`. Клиент подключится к серверу через сокет и будет готов передавать от вас сообщения.
4. Введите сообщение и нажмите Enter. Сообщение выведется в терминале Сервера, а Клиент получит количество байт принятых Сервером.
   1. ВАЖНО. Не нажимайте Enter на пустом вводе. Придётся аварийно завершать работу обоих скриптов.
5. Отправьте несколько сообщений. Введите команду `!количество`. Сервер вернёт количество принятых им сообщений.
6. Отправьте команду `!выход`. Сервер закончит свою работу и сообщит об этом Клиенту. Клиент в свою очередь также закончит работу.

> Запись с примером работы программы смотри в файле `./storage/live-example.gif`.

#### Особенности

1. Сервер и Клиент — это процессы в двух разных контейнерах, но с общими VOLUME для кода и для временных файлов.
2. Для приложения есть файл конфигурации `config.ini` в котором можно указать где хранится UNIX-сокет, а также какой объём информации за раз считывают Сервер и Клиент из сокета.
3. Для запуска команд разработан фронт-контроллер, который инициализирует приложение, передавая ему конфигурацию и входные параметры. Затем определяет какую команду надо запустить. Команды выступают контроллерами и решают какие сервисы надо запускать и что им передавать.
4. Работа с ожидаемыми ошибками выполнена через обработку исключений.

