# версия синтаксиса
version: '3'

# в этом блоке мы описываем контейнеры, которые будут запускаться
services:

  app-server:
    # Если нет секции build, то система будет искать образ в репозиториях
    build:
      context: ./fpm
      dockerfile: Dockerfile
    image: myapp/php-socket # имя будущего образа
    container_name: app-server # имя контейнера после запуска
    volumes:
       - ./code:/data/application.local
       - ./code/tmp:/data/application.local/tmp

  app-client:
    # Если нет секции build, то система будет искать образ в репозиториях
    build:
      context: ./fpm
      dockerfile: Dockerfile
    image: myapp/php-socket # имя будущего образа
    container_name: app-client # имя контейнера после запуска
    volumes:
       - ./code:/data/application.local
       - ./code/tmp:/data/application.local/tmp